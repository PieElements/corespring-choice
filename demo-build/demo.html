<!doctype html>
<html>
  <head>
    <!--<script src="//cdnjs.cloudflare.com/ajax/libs/react/15.3.1/react-dom.js"></script>-->
    <script src="//cdnjs.cloudflare.com/ajax/libs/react/15.3.1/react.js"></script>
    <script src="bundle.js"></script>
    <script type="text/javascript">

      document.addEventListener('DOMContentLoaded', function(){

        console.log('content loaded');

        //use timeout bc. we can't reliably expect the element
        //to be upgraded at this point.'
        setTimeout(function(){
          setModels('radio');
          setModels('checkbox');
        }, 1000);

        //-----------------------------------------------

        function setModels(choiceMode){
          var el = document.querySelector('#' + choiceMode + '-gather');
          el.model = makeModel('gather', choiceMode, 'gather');
          el.session = makeSession();

          var el = document.querySelector('#' + choiceMode + '-view');
          el.model = makeModel('view', choiceMode, 'view');
          el.session = makeSession();

          var el = document.querySelector('#' + choiceMode + '-evaluate-correct');
          el.model = makeModel('correct answer', choiceMode, 'evaluate', [{value:'apple', correct: true}, {value:'banana', correct:true}]);
          el.session = makeSession(['apple', 'banana']);

          var el = document.querySelector('#' + choiceMode + '-evaluate-incorrect');
          el.model = makeModel('incorrect answer', choiceMode, 'evaluate', [{value:'carrot', correct: false, feedback: 'nice try'}], ["apple", "banana"]);
          el.session = makeSession();
        }

        function makeModel(prompt, choiceMode, mode, outcomes, correctResponse) {
          return {
            env: {
              mode: mode || 'gather'
            },
            config: {
              correctResponse: correctResponse || null,
            },
            outcomes: outcomes || [],
            "prompt": "Choose the 2 tastiest things (" + prompt + ')',
            "choiceMode": choiceMode,
            "keyMode": "numbers",
            "disabled": false,
            "choices": [
              {
                "label": "Apple",
                "value": "apple"
              },
              {
                "label": "Banana",
                "value": "banana"
              },
              {
                "label": "Carrot",
                "value": "carrot"
              },
              {
                "label": "Donut",
                "value": "donut"
              }]
          };
        }

        function makeSession(values) {
          return {value: values || ['carrot']};
        }

      })
    </script>
  </head>
  <body>
    <corespring-multiple-choice-react id="checkbox-gather"></corespring-multiple-choice-react>
    <corespring-multiple-choice-react id="checkbox-view"></corespring-multiple-choice-react>
    <corespring-multiple-choice-react id="checkbox-evaluate-correct"></corespring-multiple-choice-react>
    <corespring-multiple-choice-react id="checkbox-evaluate-incorrect"></corespring-multiple-choice-react>

    <corespring-multiple-choice-react id="radio-gather"></corespring-multiple-choice-react>
    <corespring-multiple-choice-react id="radio-view"></corespring-multiple-choice-react>
    <corespring-multiple-choice-react id="radio-evaluate-correct"></corespring-multiple-choice-react>
    <corespring-multiple-choice-react id="radio-evaluate-incorrect"></corespring-multiple-choice-react>
  </body>
</html>